// RUN: xcore-opt --mlir-io %s --xcore-replace-add | FileCheck %s 

// CHECK-LABEL: add_broadcast
func.func @add_broadcast(%arg0: tensor<1x15x1x1x!quant.uniform<i8:f32, 0.0078378040343523026:-1>> {tf_saved_model.index_path = ["input_1"]}) -> (tensor<?x15x5x4x!quant.uniform<i8:f32, 0.033033743500709534:-6>> {tf_saved_model.index_path = ["add"]}) attributes {tf.entry_function = {inputs = "serving_default_input_1:0", outputs = "PartitionedCall:0"}, tf_saved_model.exported_names = ["serving_default"]} {
  // CHECK: xc.add
  %0 = "tfl.pseudo_qconst"() {qtype = tensor<1x15x5x4x!quant.uniform<i8:f32, 0.027292521670460701:1>>, value = dense<"0xE2C0F3CCE60A09CB1A1B3705FBC416FFDCEF06D4F41603E0D70404EBEC2DE5331FEFE61416F407D12ABBFA7F23190229D580243AF4E8DEB0D50428EB1110E202FCE2F435F6F5F8D9043DE3C510CEEE02F619F4BCE6FBF1F30B21F4EE0EB310EF0C1115E6D520E810DC004E3C07F2CFB5BC150E0B1BFFD1503D1BC7F6FCFA2539F4DE0AD81A4031CB094853FBE30B09C61AEC28CAD53BD035DA07E519CF151E13F9CF1DF9EEE6FA1FC8D61BB0ED61C0B1E527FBCFC7144930E707F41DF3F6BEF9CF0511F81B37C32BDF10DAE30B0E09302EC9E40828F70D14FE110CE5090C1BE4EF0BFA0905F6F9A7F2EA34EADC14E6DF16EB09D025F2FAEF47FD2D09021926DD2C1ED9090521F93C21E3F10F4C1617040FF1C518EAE51A01FD1CEF16DF03FB37FC31FE07F9EE13E83FE8C565"> : tensor<1x15x5x4xi8>} : () -> tensor<1x15x5x4x!quant.uniform<i8:f32, 0.027292521670460701:1>>
  %1 = tfl.add(%arg0, %0) {fused_activation_function = "NONE"} : (tensor<1x15x1x1x!quant.uniform<i8:f32, 0.0078378040343523026:-1>>, tensor<1x15x5x4x!quant.uniform<i8:f32, 0.027292521670460701:1>>) -> tensor<?x15x5x4x!quant.uniform<i8:f32, 0.033033743500709534:-6>>
  return %1 : tensor<?x15x5x4x!quant.uniform<i8:f32, 0.033033743500709534:-6>>
}
